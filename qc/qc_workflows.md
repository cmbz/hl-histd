# Historic Datasets Quality Control (QC) Workflow
## About
This document describes the high level workflow tasks needed to perform quality control on vendor-created content for the Historic Datasets Pilot Project.

## Workflow

### Terminology
- **Digital Object**: TO DO
- **File Types**: TO DO
- **Vendor Content**: TO DO
- **Transcriptions**: TO DO
  - (e.g., of tabular data and text annotations)

### Metadata Analysis
This part of the workflow focuses on analyzing metadata about source image files and files that have been created by the vendor

1. **Download and Process IIIF Manifest (`JSON` format)**
  - Manifest file contains the original manifest of images and OCR text associated with a digital object whose tabular data contents will be transcribed. Manifest can be downloaded directly from the digital object (e.g., see download option at https://iiif.lib.harvard.edu/manifests/view/drs:44319007$1i)
  - Generate `DataFrame` of metadata about files associated with the digital object
    - Use: `util.iiif_to_dataframe(iiif_manifest.json)`
2. **Download and Process METS File (`XML` format)**
  - METS file is generated by the vendor and contains the full list of all files associated with the digital object and its tabular data and text transcriptions. Formats include .txt, .jpg, and .csv. Note also that one image may contain multiple transcribeda tables or annotations. 
  - Generate `DataFrame` of all files that were originally part of the digital object _and_ were produced by the vendor
    - Use: `util.mets_to_dataframe(mets.xml)`
3. **Create Digital Object and Vendor File Inventories**
  - Create inventory of files associated with the original digital object
    - Process the original IIIF manifest `DataFrame` so it can be compared to the vendor inventory more easily
    - Use: `util.create_digital_object_inventory(DataFrame)`
  - Create inventory of files created by the vendor 
    - Process the METS file `DataFrame` so that it can be compared to the IIIF manifest `DataFrame` more easily. Include local file paths and test for existence of local file, if desired 
    - Use: `util.create_vendor_inventory(DataFrame)`
4. **Create Transcription Inventories**
  - Create inventories of different file types created by the vendor as transcriptions for the individual image files in the original digital object.
    - Create `csv` inventory
      - Use: `util.extract_transcription_inventory(DataFrame, ttype='csv')`
      - Use: `util.generate_transcription_report(DataFrame)` for reporting
    - Create `txt` inventory
      - Use: `util.extract_transcription_inventory(DataFrame, ttype='txt')`
      - Use: `util.generate_transcription_report(DataFrame)` for reporting
5. **Compare Digital Object Files to Vendor Files**
  - For each entry in the digital object, look for and record the corresponding vendor file/s, if any
  - Confirm that digital object DRS ids are represented in the vendor inventory
    - Use: `util.find_missing_drs_ids(DataFrame, DataFrame)`
  - Perform manual QC for DRS ids that are missing
    - TO DO
  - Confirm that there is at least one vendor-provided transcription (e.g., of tabular data and text annotations) for each image in each digital object. Report missing transcriptions for later processing.
    - Note: Use the `csv` and `txt` transcription inventories
    - `# DRS ids - # transcriptions = Reported to human`
  -   Use: `util.find_missing_transcription_drs_ids(DataFrame, DataFrame)`
  - Perform manual QC on images that do not have transcriptions.
    - TO DO

### Data Analysis
- This part of the workflow focuses on analyzing the contents of the datafiles (e.g., images, csv files, and text files) that have been generated by the vendor
  - TO DO